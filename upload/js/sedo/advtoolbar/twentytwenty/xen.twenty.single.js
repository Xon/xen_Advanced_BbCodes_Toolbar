/*Twentytwenty + XenForo Integration*/
typeof Sedo=="undefined"&&(Sedo={}),!function(n,t,i){Sedo.TwentyX2={init:function(i){i.each(function(){var i=n(this),r=i.find("img").eq(0),u=i.find("img").eq(1);i.find("img").on("load",function(){var b,y,h,v,k,p;if(!(r.width()<=2)&&!(r.height()<=2)&&i.data("complete")!=1){var g=parseFloat(i.data("diffPos")),e=parseInt(r.data("width")),s=parseInt(u.data("width")),w=i.parents(".adv_bimg_block").addClass("compare"),c=w.width(),ut=e/100,nt=i.data("phrase").split("|");i.addClass("twentytwenty-container").data("complete",1),b=function(){if(i.hasClass("Fluid")){c=w.width();var n=c*ut,t=new Image,f,o,h;return t.src=r.attr("src"),o=t.width,t.src=u.attr("src"),h=t.width,f=o>h?o:h,n>f&&(n=f),e=s=n,n}},b(),c!=0&&(e>c&&(e=c,r.attr("data-width",e)),s>c&&(s=c,u.attr("data-width",s))),r.width(e),u.width(s),y=e>s?e:s,i.width(y).attr("data-width",y);var f=g?g:.5,o=i.hasClass("DiffV")?"vertical":"horizontal",ft=o==="vertical"?"down":"left",tt=o==="vertical"?"up":"right";i.wrap("<div class='twentytwenty-wrapper twentytwenty-"+o+"'></div>"),i.append("<div class='twentytwenty-overlay'></div>"),i.append("<div class='twentytwenty-handle'></div>"),h=i.find(".twentytwenty-handle"),h.append("<span class='twentytwenty-"+ft+"-arrow'></span>"),h.append("<span class='twentytwenty-"+tt+"-arrow'></span>");var a=i.find("img:first").addClass("twentytwenty-before"),et=i.find("img:last").addClass("twentytwenty-after"),d=i.find(".twentytwenty-overlay");d.append("<div class='twentytwenty-before-label-text'>"+nt[0]+"</div><div class='twentytwenty-before-label'></div>"),d.append("<div class='twentytwenty-after-label-text'>"+nt[1]+"</div><div class='twentytwenty-after-label'></div>");var it=function(n){var r=a.width(),t=a.height(),i;return t<2&&(i=new Image,i.src=a.attr("src"),t=i.height*(r/i.width)),{w:r+"px",h:t+"px",cw:n*r+"px",ch:n*t+"px"}},rt=function(n){o==="vertical"?a.css("clip","rect(0,"+n.w+","+n.ch+",0)"):a.css("clip","rect(0,"+n.cw+","+n.h+",0)"),i.css("height",n.h)},l=function(n){var t=it(n);h.css(o==="vertical"?"top":"left",o==="vertical"?t.ch:t.cw),rt(t)};n(t,h).on("adjustTwenty",function(){l(f)});l(f),v=function(){var n=w.parent().width(),o=i.width(),c=e>s?r:u,a=c.width(),h=i.find(".twentytwenty-overlay"),t;if(i.hasClass("Fluid")){t=b(),r.width(t),u.width(t),i.width(t),l(f);return}if(o<n){o<y&&(i.width(n),h.width(n),l(f));return}i.width(n),h.width(n),l(f)},v();n(t,i).on("resize",function(){v()});i.data("sedoTwenty",{adjustTwenty:l,resizeTwenty:v}),k=0,p=0;h.on("movestart",function(n){(n.distX>n.distY&&n.distX<-n.distY||n.distX<n.distY&&n.distX>-n.distY)&&o!=="vertical"?n.preventDefault():(n.distX<n.distY&&n.distX<-n.distY||n.distX>n.distY&&n.distX>-n.distY)&&o==="vertical"&&n.preventDefault(),i.addClass("active"),k=i.offset().left,offsetY=i.offset().top,p=a.width(),imgHeight=a.height()});h.on("moveend",function(){i.removeClass("active")});h.on("move",function(n){i.hasClass("active")&&(f=o==="vertical"?(n.pageY-offsetY)/imgHeight:(n.pageX-k)/p,f<0&&(f=0),f>1&&(f=1),l(f))});i.find("img").on("mousedown",function(n){n.preventDefault()})}})})},reload:function(){n(".AdvBimgDiff").each(function(){var t=n(this);t.height()==0&&t.find("img").load(function(){t.width(t.data("width")).trigger("adjustTwenty")})})},rebuild:function(){var i=n(".AdvBimgDiff");Sedo.TwentyX2.init(i),i.trigger("resize")}},XenForo.register(".AdvBimgDiff","Sedo.TwentyX2.init");n(i).on("XenForoActivate",Sedo.TwentyX2.reload);n(t).on("load sedoRebuild",Sedo.TwentyX2.rebuild)}(jQuery,this,document);