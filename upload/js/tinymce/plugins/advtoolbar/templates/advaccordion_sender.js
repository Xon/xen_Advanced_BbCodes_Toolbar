var AdvAccordionDialog={init:function(){},submit:function(f,i){var o=AdvAccordionDialog,e,k=false,h,a,l,q,j,b,d="",g,c,n,p;if(i!="isMiu"){if(typeof tinyMCEPopup!=="undefined"){e=tinyMCEPopup.editor;k=true}else{e=XenForo.tinymce.ed}n=e.getParam("advtoolbar_template_phrase_auto")}else{n=$("#adv_accordion").attr("data-auto")}function m(r){if(d.length==0){d="="+r}else{d=d+"|"+r}}b=$("#ctrl_blockalign").val();if(b=="bleft"){b=false}q=$("#ctrl_widthtype").val();if(q=="px"){q=false}a=$("#ctrl_width").val();if(a==n){a=false}else{if(q!==false){a=a+q}}l=$("#ctrl_height").val();if(isNaN(l)){l=false}else{a=a+"x"+l}p=$("#ctrl_mode").val();if(b!==false){m(b)}if(a!==false){m(a)}g=AdvAccordionDialog.BakeSlides(l);c="["+p+d+"]"+g+"[/"+p+"]";if(i!="isMiu"){XenForo.ajax("index.php?editor/to-html",{bbCode:c},AdvAccordionDialog.insert);return false}$.markItUp({replaceWith:c,caretPositionIE:XenForo.MiuFramework.miu.caretPosition,selectionIE:XenForo.MiuFramework.miu.selection})},BakeSlides:function(b){var a="";$(".slide").not($("#model .slide")).each(function(f){var i,j,c,h,e=false,d="";function g(k){if(d.length==0){d="="+k}else{d=d+"|"+k}}i=$(this).find(".CMD_Title input").val();if(i.length==0){i=false}j=$(this).find(".CMD_Align input").val();if(j=="left"){j=false}c=$(this).find(".CMD_Height input").val();if(b===false||isNaN(c)){c=false}if($(this).find(".CMD_Open input").attr("checked")){e="open"}else{e=false}h=$(this).find(".CMD_Content textarea").val();if(i!==false){g(i)}if(j!==false){g(j)}if(c!==false){g(c)}if(e!==false){g(e)}a=a+"\n{slide"+d+"}"+h+"{/slide}\n"});return a},insert:function(a){if(XenForo.hasResponseError(a)){return false}var b,c=false;if(typeof tinyMCEPopup!=="undefined"){b=tinyMCEPopup.editor;c=true}else{b=XenForo.tinymce.ed}b.execCommand("mceInsertContent",false,a.html);if(c){tinyMCEPopup.close()}return false},escapeHtml:function(b,a){if(a!="onlyspace"){b=b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}if(a=="space"||a=="onlyspace"){b=b.replace(/\t/g,"    ").replace(/ /g,"&nbsp;").replace(/\n/g,"</p>\n<p>")}return b}};if(typeof tinyMCEPopup!=="undefined"){tinyMCEPopup.onInit.add(AdvAccordionDialog.init,AdvAccordionDialog)};